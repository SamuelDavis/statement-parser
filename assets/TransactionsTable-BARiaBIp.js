import{j as O,t as o,k as S,i as a,c as r,F as _,b as A,S as C,h as T,s as M,d as F}from"./index-D7oFNyc4.js";import{b as H,H as U,c as L,t as w}from"./state-DtF1T3AS.js";import{d as N,e as E,t as v}from"./types-qmVODdHK.js";import{A as j}from"./components-BtKx9IdC.js";var q=o("<span>"),D=o("<mark>");function x(n){const[e,u]=O(n,["value","mark"]),p=()=>N(e.value)?e.value:x.parseMatches(e.value,e.mark);return(()=>{var l=q();return S(l,u,!1,!0),a(l,r(_,{get each(){return p()},children:d=>d.match?(()=>{var g=D();return a(g,()=>d.text),g})():d.text})),l})()}x.parseMatches=(n,e)=>{const u=[];if(E(e)){const p=n.matchAll(e);let l=0;for(const{0:{length:d},index:g}of p){const s=g+d;u.push({match:!1,text:n.slice(l,g)}),u.push({match:!0,text:n.slice(g,s)}),l=s}l<n.length&&u.push({match:!1,text:n.slice(l)})}else u.push({match:!1,text:n});return u};var P=o("<thead><tr><th><details open><summary>Options</summary><label><input type=checkbox><span>Untagged Only"),R=o("<table><thead></thead><tbody>"),z=o("<th>"),B=o("<tr>"),k=o("<td>"),G=o("<tr><td><ul>"),I=o("<li>");function W(n){const[e,u]=O(n,["transactions","controls","highlight","tags"]),[p,l]=A(!1),d=()=>p()?e.transactions.filter(m=>!w.get().some(b=>m.description.match(b.regexp))):e.transactions;function g(s){l(s.currentTarget.checked)}return(()=>{var s=R(),m=s.firstChild,b=m.nextSibling;return S(s,u,!1,!0),a(s,r(C,{get when(){return e.controls},get children(){var h=P(),i=h.firstChild,c=i.firstChild,t=c.firstChild,y=t.firstChild,f=y.nextSibling,$=f.firstChild;return $.$$input=g,T(()=>M(c,"colspan",v.length)),T(()=>$.checked=p()),h}}),m),a(m,r(_,{each:v,children:h=>(()=>{var i=z();return a(i,h),i})()})),a(b,r(_,{get each(){return d()},children:h=>[(()=>{var i=B();return a(i,r(_,{each:v,children:c=>{switch(c){case"date":return(()=>{var t=k();return a(t,r(U,{get value(){return h[c]}})),t})();case"description":return(()=>{var t=k();return a(t,r(x,{get value(){return h[c]},get mark(){return e.highlight}})),t})();case"amount":return(()=>{var t=k();return a(t,r(H,{get value(){return h[c]}})),t})()}}})),i})(),r(C,{get when(){return e.tags},get children(){return r(C,{get when(){return L(w.matching(h))},children:i=>i().length>0&&(()=>{var c=G(),t=c.firstChild,y=t.firstChild;return a(y,r(_,{get each(){return i()},children:f=>(()=>{var $=I();return a($,r(j,{get href(){return`/tags?q=${f.value}`},get children(){return f.value}})),$})()})),T(()=>M(t,"colspan",v.length)),c})()})}})]})),s})()}F(["input"]);export{W as T};
