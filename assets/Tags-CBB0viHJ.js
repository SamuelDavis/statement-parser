import{m as x,k as V,t as g,l as H,i as t,b as k,c as n,S as M,h as _,F as O,d as R}from"./index-B0_qaQ3E.js";import{D as j}from"./DataList-CpfYSgDx.js";import{T as z}from"./TransactionsTable-CtPkh0kB.js";import{p as A,t as v,d as B}from"./HTMLNumber-BWLjrORW.js";import{a as G,c as J}from"./types-DLJIS_uM.js";import"./components-CmaGxw17.js";var K=g("<i>");function b(r){r=x({role:r.onClick?"button":void 0,title:r.type},r);const[p,h]=V(r,["type","classList"]),m=()=>({...p.classList??{},"material-icons":!0});return(()=>{var e=K();return H(e,x({get classList(){return m()}},h),!1,!0),t(e,()=>p.type),e})()}var N=g("<article><header><h1>Tags</h1><input type=search name=search placeholder=search list=tag-values>"),Q=g("<form><label><span>Omit from Calculations</span><input type=checkbox name=ignore></label><fieldset role=group><button type=submit></button><input type=text name=value required>"),U=g("<article><header><q></q></header><details><summary>Transactions (<output></output>)"),W=g("<h2><span>");function ae(){const[r,p]=A(k(""),{key:"q",driver:"query"}),h=()=>{const e=r(),i=v.get();return e?i.filter(f=>f.value.match(e)):i};function m(e){p(e.currentTarget.value)}return(()=>{var e=N(),i=e.firstChild,f=i.firstChild,C=f.nextSibling;return C.$$input=m,t(i,n(j,{id:"tag-values",get options(){return v.getValues()}}),null),t(e,n(O,{get each(){return h()},children:a=>{const[L,$]=k(!1),S=B.getTransactions({matching:a.regexp});function q(o){o.preventDefault();const s=new FormData(o.currentTarget),u=s.get("value")?.toString(),d=s.get("ignore")?.toString()==="on";G(J,u),v.changeValue(a,{...a,value:u,ignore:d}),$(!1)}return(()=>{var o=U(),s=o.firstChild,u=s.firstChild,d=s.nextSibling,E=d.firstChild,D=E.firstChild,F=D.nextSibling;return t(s,n(M,{get when(){return L()},get fallback(){return(()=>{var l=W(),c=l.firstChild;return t(l,n(b,{type:"edit",onClick:[$,!0]}),c),t(c,()=>a.value),l})()},get children(){var l=Q(),c=l.firstChild,w=c.firstChild,I=w.nextSibling,y=c.nextSibling,T=y.firstChild,P=T.nextSibling;return l.addEventListener("submit",q),t(T,n(b,{type:"check"})),t(y,n(b,{type:"close",onClick:[$,!1]}),null),_(()=>I.checked=a.ignore),_(()=>P.value=a.value),l}}),u),t(u,()=>a.regexp.source),t(F,()=>S.length),t(d,n(z,{transactions:S}),null),o})()}}),null),_(()=>C.value=r()),e})()}R(["input"]);export{ae as default};
