import{k as E,t as o,l as q,i as e,c as r,F as f,b as z,S as y,h as S,s as T,d as B}from"./index-B0_qaQ3E.js";import{a as L,t as k,H as w,b as G}from"./HTMLNumber-BWLjrORW.js";import{d as I,e as K,t as _}from"./types-DLJIS_uM.js";import{A as Q}from"./components-CmaGxw17.js";var V=o("<span>"),W=o("<mark>");function O(u){const[n,g]=E(u,["value","mark"]),$=()=>I(n.value)?n.value:O.parseMatches(n.value,n.mark);return(()=>{var c=V();return q(c,g,!1,!0),e(c,r(f,{get each(){return $()},children:i=>i.match?(()=>{var d=W();return e(d,()=>i.text),d})():i.text})),c})()}O.parseMatches=(u,n)=>{const g=[];if(K(n)){const $=u.matchAll(n);let c=0;for(const{0:{length:i},index:d}of $){const h=d+i;g.push({match:!1,text:u.slice(c,d)}),g.push({match:!0,text:u.slice(d,h)}),c=h}c<u.length&&g.push({match:!1,text:u.slice(c)})}else g.push({match:!1,text:u});return g};var X=o("<thead><tr><th><details open><summary>Options</summary><label><input type=checkbox><span>Untagged Only"),Y=o("<table><thead><tr><th><p><output></output> transactions with a value of <!> from <!> to <!>.</p></th></tr><tr></tr></thead><tbody>"),Z=o("<th>"),ee=o("<tr>"),M=o("<td>"),te=o("<tr><td><ul>"),re=o("<li>");function ie(u){const[n,g]=E(u,["transactions","controls","highlight","tags"]),[$,c]=z(!1),i=()=>$()?n.transactions.filter(p=>!k.get().some(v=>p.description.match(v.regexp))):n.transactions;function d(h){c(h.currentTarget.checked)}return(()=>{var h=Y(),p=h.firstChild,v=p.firstChild,A=v.firstChild,b=A.firstChild,F=b.firstChild,D=F.nextSibling,H=D.nextSibling,J=H.nextSibling,N=J.nextSibling,P=N.nextSibling,U=P.nextSibling;U.nextSibling;var R=v.nextSibling,j=p.nextSibling;return q(h,g,!1,!0),e(h,r(y,{get when(){return n.controls},get children(){var l=X(),t=l.firstChild,s=t.firstChild,a=s.firstChild,C=a.firstChild,x=C.nextSibling,m=x.firstChild;return m.$$input=d,S(()=>T(s,"colspan",_.length)),S(()=>m.checked=$()),l}}),p),e(F,()=>i().length),e(b,r(L,{get value(){return i().filter(l=>{const t=k.matching(l);return t.length===0||t.some(s=>!s.ignore)}).reduce((l,t)=>l+t.amount,0)}}),H),e(b,r(w,{get value(){return i().slice(-1)[0].date}}),N),e(b,r(w,{get value(){return i()[0].date}}),U),e(R,r(f,{each:_,children:l=>(()=>{var t=Z();return e(t,l),t})()})),e(j,r(f,{get each(){return i()},children:l=>[(()=>{var t=ee();return e(t,r(f,{each:_,children:s=>{switch(s){case"date":return(()=>{var a=M();return e(a,r(w,{get value(){return l[s]}})),a})();case"description":return(()=>{var a=M();return e(a,r(O,{get value(){return l[s]},get mark(){return n.highlight}})),a})();case"amount":return(()=>{var a=M();return e(a,r(L,{get value(){return l[s]}})),a})()}}})),t})(),r(y,{get when(){return n.tags},get children(){return r(y,{get when(){return G(k.matching(l))},children:t=>t().length>0&&(()=>{var s=te(),a=s.firstChild,C=a.firstChild;return e(C,r(f,{get each(){return t()},children:x=>(()=>{var m=re();return e(m,r(Q,{get href(){return`/tags?q=${JSON.stringify(x.value)}`},get children(){return x.value}})),m})()})),S(()=>T(a,"colspan",_.length)),s})()})}})]})),S(()=>T(A,"colspan",_.length)),h})()}B(["input"]);export{ie as T};
