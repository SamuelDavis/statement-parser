import{b as _,t as U,i as r,c as a,S as j,h as b,d as z}from"./index-Dt_LWpRi.js";import{D as T}from"./DataList-CuiAIwAq.js";import{T as v}from"./TransactionsTable-O9_4x2N6.js";import{p as A,t as u,u as d,d as y}from"./state-BVGeHIDH.js";import{F as C}from"./types-qmVODdHK.js";import"./components-JLqK3Spt.js";var B=U("<article><h1>Tagging</h1><section><form><h2>Search & Tag Transactions</h2><fieldset role=group><input placeholder=search type=search name=search list=tag-sources required><input placeholder=tag... type=text name=text list=tag-values required><input type=submit></fieldset></form></section><hr><section><header role=group><h2>Transactions</h2><label><span>Untagged Only</span><input type=checkbox>"),G=U("<aside><h3>Next Untagged Transaction");function W(){const[h,p]=A(_(""),{key:"q",driver:"query"}),[f,w]=_(!1),l=()=>d(new RegExp(h(),C)),E=()=>y.findTransactions({matching:l(),untagged:f()}),m=()=>y.getUntaggedTransactions()[0];function F(e){e.preventDefault();const i=new FormData(e.currentTarget),n=d(i.get("search")?.toString()),t=d(i.get("text")?.toString());if(!n||!t)return;const s={regexp:new RegExp(n,C),value:t};if(!m().description.match(s.regexp)){alert("Search not found in transaction description.");return}u.add(s),p(""),e.currentTarget.reset()}function k(e){p(e.currentTarget.value)}function q(e){w(e.currentTarget.checked)}return(()=>{var e=B(),i=e.firstChild,n=i.nextSibling,t=n.firstChild,s=t.firstChild,g=s.nextSibling,o=g.firstChild,$=o.nextSibling,D=$.nextSibling,O=n.nextSibling,x=O.nextSibling,R=x.firstChild,L=R.firstChild,I=L.nextSibling,N=I.firstChild,S=N.nextSibling;return t.addEventListener("submit",F),o.$$input=k,r(g,a(T,{id:"tag-sources",get options(){return u.getSources()}}),$),r(g,a(T,{id:"tag-values",get options(){return u.getValues()}}),D),r(t,a(j,{get when(){return m()},children:V=>(()=>{var c=G();return c.firstChild,r(c,a(v,{get highlight(){return l()},get transactions(){return[V()]}}),null),c})()}),null),S.$$input=q,r(x,a(v,{controls:!0,get highlight(){return l()},get transactions(){return E()},tags:!0}),null),b(()=>o.value=h()),b(()=>S.checked=f()),e})()}z(["input"]);export{W as default};
